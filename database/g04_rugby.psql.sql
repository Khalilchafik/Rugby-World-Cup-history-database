DROP TABLE IF EXISTS g04_organise;
DROP TABLE IF EXISTS g04_participe;
DROP TABLE IF EXISTS g04_edition;
DROP TABLE IF EXISTS g04_nation;

-- création de la table g04_edition
CREATE TABLE IF NOT EXISTS G04_edition (
    edt_id SERIAL PRIMARY KEY,
    edt_annee INT NOT NULL UNIQUE,
    edt_champion VARCHAR(100) NOT NULL,
    edt_nbr_participants INT NOT NULL,
    edt_budget FLOAT,
    edt_MVP VARCHAR(100) NOT NULL,
    edt_spectateurs INT,
    edt_matches INT NOT NULL
);
-- alimentation de la table G04_edition 
INSERT INTO G04_edition (edt_annee, edt_champion, edt_nbr_participants, edt_budget, edt_MVP, edt_spectateurs, edt_matches)
VALUES 
    (1987, 'Nouvelle-Zélande', 16, 3.3, 'Grant Fox', 604500, 32),
    (1991, 'Australie', 16, 23.6, 'Ralph Keyes', 1007760, 32),
    (1995, 'Afrique du Sud', 16, 30.3, 'Thierry Lacroix', 1100000, 32),
    (1999, 'Australie', 20, 70.0, 'Tim Horan', 1750000, 41),
    (2003, 'Angleterre', 20, 81.8, 'Jonny Wilkinson', 1837547, 48),
    (2007, 'Afrique du Sud', 20, null, 'Percy Montgomery', 2263331, 48),
    (2011, 'Nouvelle-Zélande', 20, null, 'Morné Steyn', 1480000, 48),
    (2015, 'Nouvelle-Zélande', 20, null, 'Nicolás Sánchez', 2477805, 48),
    (2019, 'Afrique du Sud', 20, null, 'Handré Pollard', null, 45),
    (2023, 'Afrique du Sud', 20, null, 'Owen Farrell', null, 48);
-- création de la table g04_nation
CREATE TABLE IF NOT EXISTS G04_nation (
    nat_ID SERIAL PRIMARY KEY,
    nat_Nom VARCHAR(100) NOT NULL,
    nat_titre INT,
    nat_continent VARCHAR(100) CHECK (nat_continent IN ('Afrique', 'Asie', 'Europe', 'Amérique du Nord', 'Amérique du Sud', 'Océanie')),
    nat_participation INT DEFAULT 0,
    nat_classement INT NOT NULL,
    nat_surnom VARCHAR(100) UNIQUE
);
-- alimentation de la table g04_nation
insert into g04_Nation (nat_nom , nat_continent , nat_classement , nat_surnom )
	values
			('Afrique du Sud' , 'Afrique' , 3 , 'Springboks'),
		    ('Chili', 'Amérique du Sud', 22 , 'Los Cóndores'),
			('Espagne' , 'Europe', 19 , 'XV del León'),
            ('Nouvelle-Zélande', 'Océanie', 4 , 'All blacks'),
            ('Australie', 'Océanie', 9 , 'Wallabies'),
            ('Côte d''Ivoire', 'Afrique', 48 , 'Les Éléphants'),
            ('Portugal', 'Europe',13, 'Os Lobos'),
            ('Angleterre', 'Europe', 6, 'XV de la Rose'),
            ('France','Europe', 2, 'les Tricolores'),
            ('Russie', 'Europe', 25, 'Les ours'),
            ('Zimbabwe', 'Afrique', 31, 'Sables'),
			('Pays de Galles' , 'Europe', 7, 'les Dragons rouges'),
			('Argentine' , 'Amérique du Sud', 8, 'los pumas'),
			('Uruguay', 'Amérique du Sud', 17, 'Los Teros'),
			('Géorgie','Europe', 14, 'Les Lelos'),
			('Écosse', 'Europe', 5, 'XV du chardon'),
			('Irlande', 'Europe', 1, 'XV du Trèfle'),
			('Namibie' , 'Afrique', 21, 'Welwitschias'),
			('États-Unis', 'Amérique du Nord', 18, 'Eagles'),
			('Fidji' , 'Océanie', 10, 'The Flying Fijians'),
			('Samoa', 'Océanie', 15, 'Manu Samoa'),
            ('Roumanie', 'Europe', 20, 'les Chênes'),
            ('Tonga', 'Océanie', 16, 'Les Aigles de mer'),
            ('Japon','Asie', 12, 'The Brave Blossoms'),
            ('Canada','Amérique du Nord',23, 'les Canucks'),
            ('Italie','Europe', 11, 'la Squadra Azzurra');
-- création de la table g04_participe
create table  IF NOT EXISTS G04_participe(
nat_id INT not null,
edt_id INT not null,
matches_joues INT not null,
resultat varchar(100)  not null CHECK (resultat IN ('premier tour', 'Quart de finale', 'Demi-finaliste', 'finaliste', 'Champion')),
FOREIGN KEY (nat_id) REFERENCES G04_nation (nat_ID)  ON UPDATE CASCADE ON DELETE CASCADE ,
FOREIGN KEY (edt_id) REFERENCES G04_edition (edt_id) ON UPDATE CASCADE ON DELETE CASCADE ,
primary key (nat_id,edt_id)
);
-- alimentation de la table G04_participe
-- les informations de l'édition de 1987
insert into g04_participe (matches_joues , resultat , nat_id ,edt_id)
VALUES
	(3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Zimbabwe' ),
    (select edt_id from g04_edition where edt_annee = 1987)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Argentine' ),
    (select edt_id from g04_edition where edt_annee = 1987)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Canada' ),
    (select edt_id from g04_edition where edt_annee = 1987)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'États-Unis' ),
    (select edt_id from g04_edition where edt_annee = 1987)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Japon' ),
    (select edt_id from g04_edition where edt_annee = 1987)),
    (4, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Angleterre' ),
    (select edt_id from g04_edition where edt_annee = 1987)),
	(4, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Écosse' ),
    (select edt_id from g04_edition where edt_annee = 1987)),
    (6, 'finaliste' , (select nat_id from g04_nation where nat_nom = 'France' ),
    (select edt_id from g04_edition where edt_annee = 1987)),
    (6, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Pays de Galles' ),
    (select edt_id from g04_edition where edt_annee = 1987)),
    (4, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Irlande' ),
    (select edt_id from g04_edition where edt_annee = 1987)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Italie' ),
    (select edt_id from g04_edition where edt_annee = 1987)),
	(3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Roumanie' ),
    (select edt_id from g04_edition where edt_annee = 1987)),
    (6, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Australie' ),
    (select edt_id from g04_edition where edt_annee = 1987)),
    (4, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Fidji' ),
    (select edt_id from g04_edition where edt_annee = 1987)),
    (6, 'Champion' , (select nat_id from g04_nation where nat_nom = 'Nouvelle-Zélande' ),
    (select edt_id from g04_edition where edt_annee = 1987)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Tonga' ),
    (select edt_id from g04_edition where edt_annee = 1987));
-- les informations de l'édition de 1991
insert into g04_participe (matches_joues , resultat , nat_id ,edt_id)
VALUES
	(3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Roumanie' ),
    (select edt_id from g04_edition where edt_annee = 1991)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Italie' ),
    (select edt_id from g04_edition where edt_annee = 1991)),
    (6, 'finaliste' , (select nat_id from g04_nation where nat_nom = 'Angleterre' ),
    (select edt_id from g04_edition where edt_annee = 1991)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Fidji' ),
    (select edt_id from g04_edition where edt_annee = 1991)),
    (4, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Samoa' ),
    (select edt_id from g04_edition where edt_annee = 1991)),
    (4, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Irlande' ),
    (select edt_id from g04_edition where edt_annee = 1991)),
    (6, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Écosse' ),
    (select edt_id from g04_edition where edt_annee = 1991)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'États-Unis' ),
    (select edt_id from g04_edition where edt_annee = 1991)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Argentine' ),
    (select edt_id from g04_edition where edt_annee = 1991)),
    (6, 'Champion' , (select nat_id from g04_nation where nat_nom = 'Australie' ),
    (select edt_id from g04_edition where edt_annee = 1991)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Pays de Galles' ),
    (select edt_id from g04_edition where edt_annee = 1991)),
    (4, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Canada' ),
    (select edt_id from g04_edition where edt_annee = 1991)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Japon' ),
    (select edt_id from g04_edition where edt_annee = 1991)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Zimbabwe' ),
    (select edt_id from g04_edition where edt_annee = 1991)),
    (4, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'France' ),
    (select edt_id from g04_edition where edt_annee = 1991)),
    (6, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Nouvelle-Zélande' ),
    (select edt_id from g04_edition where edt_annee = 1991));
-- les informations de l'édition de 1995
insert into g04_participe (matches_joues , resultat , nat_id ,edt_id)
VALUES
	(6, 'Champion' , (select nat_id from g04_nation where nat_nom = 'Afrique du Sud' ),
    (select edt_id from g04_edition where edt_annee = 1995)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Argentine' ),
    (select edt_id from g04_edition where edt_annee = 1995)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Japon' ),
    (select edt_id from g04_edition where edt_annee = 1995)),
    (6, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Angleterre' ),
    (select edt_id from g04_edition where edt_annee = 1995)),
    (4, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Australie' ),
    (select edt_id from g04_edition where edt_annee = 1995)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Côte d''Ivoire' ),
    (select edt_id from g04_edition where edt_annee = 1995)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Canada' ),
    (select edt_id from g04_edition where edt_annee = 1995)),
    (6, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'France' ),
    (select edt_id from g04_edition where edt_annee = 1995)),
    (6, 'finaliste' , (select nat_id from g04_nation where nat_nom = 'Nouvelle-Zélande' ),
    (select edt_id from g04_edition where edt_annee = 1995)),
    (4, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Irlande' ),
    (select edt_id from g04_edition where edt_annee = 1995)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Tonga' ),
    (select edt_id from g04_edition where edt_annee = 1995)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Italie' ),
    (select edt_id from g04_edition where edt_annee = 1995)),
    (4, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Samoa' ),
    (select edt_id from g04_edition where edt_annee = 1995)),
    (3 ,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Roumanie' ),
    (select edt_id from g04_edition where edt_annee = 1995)),
    (4, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Écosse' ),
    (select edt_id from g04_edition where edt_annee = 1995)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Pays de Galles' ),
    (select edt_id from g04_edition where edt_annee = 1995));
-- les informations de l'édition de 1999
insert into g04_participe (matches_joues , resultat , nat_id ,edt_id)
VALUES
	(6, 'finaliste' , (select nat_id from g04_nation where nat_nom = 'France' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
    (6, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Afrique du Sud' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Écosse' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Uruguay' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
    (3, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Espagne' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
    (6, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Nouvelle-Zélande' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Angleterre' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
    (3,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Tonga' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
     (3,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Italie' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
     (4,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Fidji' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
     (3,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Canada' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
     (3,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Namibie' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
     (4,'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Pays de Galles' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
    (4,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Samoa' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
    (5,'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Argentine' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
    (3,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Japon' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
    (6,'Champion' , (select nat_id from g04_nation where nat_nom = 'Australie' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
     (4,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Irlande' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
     (3,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Roumanie' ),
    (select edt_id from g04_edition where edt_annee = 1999)),
     (3,'premier tour' , (select nat_id from g04_nation where nat_nom = 'États-Unis' ),
    (select edt_id from g04_edition where edt_annee = 1999));
-- les informations de l'édition de 2003
insert into g04_participe (matches_joues , resultat , nat_id ,edt_id)
VALUES
	(7, 'finaliste' , (select nat_id from g04_nation where nat_nom = 'Australie' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Irlande' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Argentine' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
     (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Roumanie' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
     (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Namibie' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
     (7, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'France' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Écosse' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Fidji' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'États-Unis' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Japon' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
    (7, 'Champion' , (select nat_id from g04_nation where nat_nom = 'Angleterre' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Afrique du Sud' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Samoa' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Uruguay' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Géorgie' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
     (7, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Nouvelle-Zélande' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
     (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Pays de Galles' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
     (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Italie' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
     (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Canada' ),
    (select edt_id from g04_edition where edt_annee = 2003)),
     (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Tonga' ),
    (select edt_id from g04_edition where edt_annee = 2003));
-- les informations de l'édition de 2007
insert into g04_participe (matches_joues , resultat , nat_id ,edt_id)
VALUES
	(7, 'Champion' , (select nat_id from g04_nation where nat_nom = 'Afrique du Sud' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
    (7, 'finaliste' , (select nat_id from g04_nation where nat_nom = 'Angleterre' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
    (4 ,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Tonga' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
    (5,'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Nouvelle-Zélande' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
    (7 ,'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'France' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
    (5,'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Australie' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
    (7 ,'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Argentine' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
     (4 ,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Pays de Galles' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
     (5,'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Fidji' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
    (5,'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Écosse' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
     (4 ,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Italie' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
     (4 ,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Samoa' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
     (4 ,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Irlande' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
     (4 ,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Japon' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
     (4 ,'premier tour' , (select nat_id from g04_nation where nat_nom = 'États-Unis' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
     (4 ,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Canada' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
     (4 ,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Géorgie' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
    (4 ,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Roumanie' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
    (4 ,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Portugal' ),
    (select edt_id from g04_edition where edt_annee = 2007)),
    (4 ,'premier tour' , (select nat_id from g04_nation where nat_nom = 'Namibie' ),
    (select edt_id from g04_edition where edt_annee = 2007));
-- les informations de l'édition de 2011
insert into g04_participe (matches_joues , resultat , nat_id ,edt_id)
VALUES
	(7, 'Champion' , (select nat_id from g04_nation where nat_nom = 'Nouvelle-Zélande' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (7, 'finaliste' , (select nat_id from g04_nation where nat_nom = 'France' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (7, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Australie' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (7, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Pays de Galles' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Afrique du Sud' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Angleterre' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Irlande' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Argentine' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Écosse' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Samoa' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Italie' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Tonga' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Canada' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Fidji' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Géorgie' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'États-Unis' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Japon' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Russie' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Roumanie' ),
    (select edt_id from g04_edition where edt_annee = 2011)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Namibie' ),
    (select edt_id from g04_edition where edt_annee = 2011));
-- les informations de l'édition de 2015
insert into g04_participe (matches_joues , resultat , nat_id ,edt_id)
VALUES
	(7, 'Champion' , (select nat_id from g04_nation where nat_nom = 'Nouvelle-Zélande' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (7, 'finaliste' , (select nat_id from g04_nation where nat_nom = 'Australie' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (7, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Afrique du Sud' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (7, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Argentine' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Irlande' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Écosse' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'France' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Pays de Galles' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Japon' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Angleterre' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Italie' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Géorgie' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Samoa' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Tonga' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Fidji' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Roumanie' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Canada' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Namibie' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'États-Unis' ),
    (select edt_id from g04_edition where edt_annee = 2015)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Uruguay' ),
    (select edt_id from g04_edition where edt_annee = 2015));
-- les informations de l'édition de 2019
insert into g04_participe (matches_joues , resultat , nat_id ,edt_id)
VALUES
	(7, 'Champion' , (select nat_id from g04_nation where nat_nom = 'Afrique du Sud' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
    (7, 'finaliste' , (select nat_id from g04_nation where nat_nom = 'Angleterre' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
    (7, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Nouvelle-Zélande' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
    (7, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Pays de Galles' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
	(5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Japon' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Irlande' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Australie' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'France' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Italie' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Écosse' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Argentine' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Fidji' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Tonga' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Géorgie' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
     (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Samoa' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
     (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Namibie' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
     (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Uruguay' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
     (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Canada' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'États-Unis' ),
    (select edt_id from g04_edition where edt_annee = 2019)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Russie' ),
    (select edt_id from g04_edition where edt_annee = 2019));
-- les informations de l'édition de 2023
insert into g04_participe (matches_joues , resultat , nat_id ,edt_id)
VALUES
	(7, 'Champion' , (select nat_id from g04_nation where nat_nom = 'Afrique du Sud' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (7, 'finaliste' , (select nat_id from g04_nation where nat_nom = 'Nouvelle-Zélande' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (7, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Angleterre' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (7, 'Demi-finaliste' , (select nat_id from g04_nation where nat_nom = 'Argentine' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Irlande' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Pays de Galles' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'France' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (5, 'Quart de finale' , (select nat_id from g04_nation where nat_nom = 'Fidji' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Australie' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Écosse' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Italie' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Japon' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Samoa' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Portugal' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Tonga' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Uruguay' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Géorgie' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Chili' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Namibie' ),
    (select edt_id from g04_edition where edt_annee = 2023)),
    (4, 'premier tour' , (select nat_id from g04_nation where nat_nom = 'Roumanie' ),
    (select edt_id from g04_edition where edt_annee = 2023));
-- la mise à jour des deux attributs nat_participation et nat_titre après avoir les informations sur toutes les participations dans les différentes éditions
UPDATE g04_Nation 
SET nat_participation = (
    SELECT COUNT(*) 
    FROM g04_participe 
    WHERE g04_Nation.nat_id = g04_participe.nat_id
);
UPDATE g04_Nation
	SET nat_titre = (
	SELECT COUNT(*)
    FROM g04_participe
    WHERE g04_Nation.nat_id = g04_participe.nat_id AND resultat = 'Champion');
-- création de la table g04_organise
CREATE TABLE IF NOT EXISTS G04_organise (
    nat_id INT NOT NULL,
    edt_id INT NOT NULL,
    FOREIGN KEY (nat_id) REFERENCES G04_nation(nat_id) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (edt_id) REFERENCES G04_edition(edt_id)  ON UPDATE CASCADE ON DELETE CASCADE,
    PRIMARY KEY (nat_id, edt_id)
);
-- alimentation de la table g04_organise
insert into g04_organise (nat_id ,edt_id)
VALUES
	((select nat_id from g04_nation where nat_nom = 'Nouvelle-Zélande' ) ,
    ( select edt_id from g04_edition where edt_annee = 1987)),
    ((select nat_id from g04_nation where nat_nom = 'Australie' ) , 
    ( select edt_id from g04_edition where edt_annee = 1987)),
    ((select nat_id from g04_nation where nat_nom = 'Angleterre' ) , 
    ( select edt_id from g04_edition where edt_annee = 1991)),
    ( (select nat_id from g04_nation where nat_nom = 'France' ) , 
    ( select edt_id from g04_edition where edt_annee = 1991)),
    ((select nat_id from g04_nation where nat_nom = 'Écosse' ) ,
    ( select edt_id from g04_edition where edt_annee = 1991)),
    ( (select nat_id from g04_nation where nat_nom = 'Pays de Galles' ) , 
    ( select edt_id from g04_edition where edt_annee = 1991)),
    ( (select nat_id from g04_nation where nat_nom = 'Irlande' ) ,
    ( select edt_id from g04_edition where edt_annee = 1991)),
    ( (select nat_id from g04_nation where nat_nom = 'Afrique du Sud' ) , 
    ( select edt_id from g04_edition where edt_annee = 1995)),
	( (select nat_id from g04_nation where nat_nom = 'Angleterre' ) , 
    ( select edt_id from g04_edition where edt_annee = 1999)),
	((select nat_id from g04_nation where nat_nom = 'Pays de Galles' ) , 
    ( select edt_id from g04_edition where edt_annee = 1999)),
    ( (select nat_id from g04_nation where nat_nom = 'France' ) , 
    ( select edt_id from g04_edition where edt_annee = 1999)),
    ( (select nat_id from g04_nation where nat_nom = 'Irlande' ) , 
    ( select edt_id from g04_edition where edt_annee = 1999)),
    ( (select nat_id from g04_nation where nat_nom = 'Écosse' ) , 
    ( select edt_id from g04_edition where edt_annee = 1999)),
    ( (select nat_id from g04_nation where nat_nom = 'Australie' ) , 
    ( select edt_id from g04_edition where edt_annee = 2003)),
    ( (select nat_id from g04_nation where nat_nom = 'France' ) , 
    ( select edt_id from g04_edition where edt_annee = 2007)),
    ( (select nat_id from g04_nation where nat_nom = 'Écosse' ) , 
    ( select edt_id from g04_edition where edt_annee = 2007)),
    ( (select nat_id from g04_nation where nat_nom = 'Pays de Galles' ) , 
    ( select edt_id from g04_edition where edt_annee = 2007)),
    ( (select nat_id from g04_nation where nat_nom = 'Nouvelle-Zélande' ) , 
    ( select edt_id from g04_edition where edt_annee = 2011)),
    ( (select nat_id from g04_nation where nat_nom = 'Angleterre' ) , 
    ( select edt_id from g04_edition where edt_annee = 2015)),
	( (select nat_id from g04_nation where nat_nom = 'Pays de Galles' ) , 
    ( select edt_id from g04_edition where edt_annee = 2015)),
    ( (select nat_id from g04_nation where nat_nom = 'Japon' ), 
    ( select edt_id from g04_edition where edt_annee = 2019)),
    ( (select nat_id from g04_nation where nat_nom = 'France' ) , 
    ( select edt_id from g04_edition where edt_annee = 2023));

